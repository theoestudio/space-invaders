(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function Q(a){let e="invalid";if(a.includes("rgba"))e=ee(a);else if(a.includes("rgb"))e=te(a);else if(a.includes("hsba"))e=getObjectFromHsba(a);else if(a.includes("hsva"))e=W(a);else if(a.includes("hsb"))e=getObjectFromHsb(a);else if(a.includes("hsv"))e=se(a);else if(a.includes("hsla"))e=j(a);else if(a.includes("hsl"))e=O(a);else if(a.includes("cmyk"))e=ie(a);else if(a.includes("#")&&a.length===4)e=ne(a);else if(a.includes("#")&&a.length===7)e=ae(a);else throw Error("[Ink] Unknown color type.");return e}function ee(a){let[e,s,t,n]=a.replace(/(\(|\)|rgba)/g,"").split(",");if(e=+e|0,isNaN(+e)||typeof e!="number")throw Error(`[Ink] Red rgba value is not a valid number. (${e})`);if(e<0&&(console.warn(`[Ink] Red rgba value was less than 0. (${e})`),console.warn("[Ink] Converting red value to 0..."),e=0),e>255&&(console.warn(`[Ink] Red rgba value was greater than 255. (${e})`),console.warn("[Ink] Converting red value to 255..."),e=255),s=+s|0,isNaN(+s)||typeof s!="number")throw Error("[Ink] Green rgba value is not a valid number.");if(s<0&&(console.warn(`[Ink] Green rgba value was less than 0. (${s})`),console.warn("[Ink] converting green value to 0..."),s=0),s>255&&(console.warn(`[Ink] Green rgba value was greater than 255. (${s})`),console.warn("[Ink] Converting green value to 255..."),s=255),t=+t|0,isNaN(+t)||typeof t!="number")throw Error("[Ink] Blue rgba value is not a valid number.");return t<0&&(console.warn(`[Ink] Blur rgba value was less than 0. (${t})`),console.warn("[Ink] converting blue value to 0..."),t=0),t>255&&(console.warn(`[Ink] Blue rgba value was greater than 255. (${t})`),console.warn("[Ink] Converting blue value to 255..."),t=255),n=+n,{r:e,g:s,b:t,a:n}}function te(a){let[e,s,t]=a.replace(/(\(|\)|rgb)/g,"").split(",");if(e=+e|0,isNaN(e)||typeof e!="number")throw Error("[Ink] Red rgb value is not a valid number.");if(e<0&&(console.warn(`[Ink] Red rgb value was less than 0. (${e})`),console.warn("[Ink] Converting red value to 0..."),e=0),e>255&&(console.warn(`[Ink] Red rgb value was greater than 255. (${e})`),console.warn("[Ink] Converting red value to 255..."),e=255),s=+s|0,isNaN(s)||typeof s!="number")throw Error("[Ink] Green rgb value is not a valid number.");if(s<0&&(console.warn(`[Ink] Green rgb value was less than 0. (${s})`),console.warn("[Ink] converting green value to 0..."),s=0),s>255&&(console.warn(`[Ink] Green rgb value was greater than 255. (${s})`),console.warn("[Ink] Converting green value to 255..."),s=255),t=+t|0,isNaN(t)||typeof t!="number")throw Error("[Ink] Blue rgb value is not a valid number.");return t<0&&(console.warn(`[Ink] Blue rgb value was less than 0. (${t})`),console.warn("[Ink] converting blue value to 0..."),t=0),t>255&&(console.warn(`[Ink] Blue rgb value was greater than 255. (${t})`),console.warn("[Ink] Converting blue value to 255..."),t=255),{r:e,g:s,b:t,a:1}}function W(a){let[e,s,t,n]=a.replace(/(\(|\)|hsba|hsva)/g,"").split(","),i,r,l;if(e=+e,isNaN(e)||typeof e!="number")throw Error("[Ink] Hue hsv(a)/hsb(a) is not a valid number.");if(e>360.0001&&(console.warn(`[Ink] Hue hsv(a)/hsb(a) was greater than 360. (${e})`),console.warn(`[Ink] Converting hue value to ${e%360}.`),e%=360),e<0&&(console.warn(`[Ink] Hue hsv(a)/hsb(a) was less than 0. (${e})`),console.warn(`[Ink] Converting hue value to ${360+e%360}.`),e=360-e%360),s=+s,isNaN(s)||typeof s!="number")throw Error("[Ink] Saturation hsv(a)/hsb(a) is not a valid number.");if(s<0&&(console.warn(`[Ink] Saturation hsv(a)/hsb(a) was less than 0. (${s})`),console.warn("[Ink] Converting saturation value to 0..."),s=0),s>1.0001&&(console.warn(`[Ink] Saturation hsv(a)/hsb(a) was greater than 0. (${s})`),console.warn("[Ink] Converting saturation value to 1..."),s=1),t=+t,isNaN(t)||typeof t!="number")throw Error("[Ink] Brightness/value hsv(a)/hsb(a) is not a valid number.");t<0&&(console.warn(`[Ink] Brightness/value hsv(a)/hsb(a) was less than 0. (${t})`),console.warn("[Ink] Converting brightness to 0..."),t=0),t>1.0001&&(console.warn(`[Ink] Brightness/value hsv(a)/hsb(a) was greater than 1. (${t})`),console.warn("[Ink] Converting brightness to 1..."),t=1),n=+n;let h=t*s,o=h*(1-Math.abs(e/60%2-1)),u=t-h,f=c=>e<60?Math.round(([h,o,0][c]+u)*255):e<120?Math.round(([o,h,0][c]+u)*255):e<180?Math.round(([0,h,o][c]+u)*255):e<240?Math.round(([0,o,h][c]+u)*255):e<300?Math.round(([o,0,h][c]+u)*255):Math.round(([h,0,o][c]+u)*255);return[i,r,l]=[f(0),f(1),f(2)],{r:i,g:r,b:l,a:n}}function se(a){let[e,s,t]=a.replace(/(\(|\)|hsb|hsv)/g,"").split(",");return W(`hsva(${e},${s},${t},1)`)}function j(a){let[e,s,t,n]=a.replace(/(\(|\)|hsla)/g,"").split(","),i,r,l;if(e=+e|0,isNaN(e)||typeof e!="number")throw Error("[Ink] Hue hsl(a) is not a valid number.");if(e>360&&(console.warn(`[Ink] Hue hsl(a) was greater than 360. (${e})`),console.warn(`[Ink] Converting hue value to ${e%360}.`),e%=360),e<0&&(console.warn(`[Ink] Hue hsl(a) was less than 0. (${e})`),console.warn(`[Ink] Converting hue value to ${360+e%360}.`),e=360-e%360),s=+s,isNaN(s)||typeof s!="number")throw Error("[Ink] Saturation hsl(a) is not a valid number.");if(s<0&&(console.warn(`[Ink] Saturation hsl(a) was less than 0. (${s})`),console.warn("[Ink] Converting saturation value to 0..."),s=0),s>1.0001?(console.warn(`[Ink] Saturation hsl(a) was greater than 0. (${s})`),console.warn("[Ink] Converting saturation value to 1..."),s=1):s>1&&(s=1),t=+t,isNaN(t)||typeof t!="number")throw Error("[Ink] Lightness hsl(a) is not a valid number.");t<0&&(console.warn(`[Ink] Lightness hsl(a) was less than 0. (${t})`),console.warn("[Ink] Converting lightness to 0..."),t=0),t>1.0001?(console.warn(`[Ink] Lightness hsl(a) was greater than 1. (${t})`),console.warn("[Ink] Converting lightness to 1..."),t=1):t>1&&(t=1),n=+n;let h=(1-Math.abs(2*t-1))*s,o=h*(1-Math.abs(e/60%2-1)),u=t-h/2,f=c=>e<60?Math.round(([h,o,0][c]+u)*255):e<120?Math.round(([o,h,0][c]+u)*255):e<180?Math.round(([0,h,o][c]+u)*255):e<240?Math.round(([0,o,h][c]+u)*255):e<300?Math.round(([o,0,h][c]+u)*255):Math.round(([h,0,o][c]+u)*255);return[i,r,l]=[f(0),f(1),f(2)],{r:i,g:r,b:l,a:n}}function ie(a){let[e,s,t,n]=a.replace(/(\(|\)|cmyk)/g,"").split(",");if(e=+e,isNaN(e)||typeof e!="number")throw Error("[Ink] Cyan cmyk is not a valid number.");if(e<0&&(console.warn(`[Ink] Cyan cmyk was less than 0. (${e})`),console.warn("[Ink] Converting cyan value to 0..."),e=0),e>1.0001?(console.warn(`[Ink] Cyan cmyk was greater than 1. (${e})`),console.warn("[Ink] Converting cyan value to 1."),e=1):e>1&&(e=1),s=+s,isNaN(s)||typeof s!="number")throw Error("[Ink] Magenta cmyk is not a valid number.");if(s<0&&(console.warn(`[Ink] Magenta cmyk was less than 0. (${s})`),console.warn("[Ink] Converting magenta value to 0..."),s=0),s>1.0001?(console.warn(`[Ink] Magenta cmyk was greater than 1 (${s}).`),console.warn("[Ink] Converting magenta value to 1."),s=1):s>1&&(s=1),t=+t,isNaN(t)||typeof t!="number")throw Error("[Ink] Yellow cmyk is not a valid number.");if(s<0&&(console.warn(`[Ink] Yellow cmyk was less than 0. (${s})`),console.warn("[Ink] Converting yellow value to 0..."),t=0),t>1.0001?(console.warn(`[Ink] Yellow cmyk was greater than 1. (${t})`),console.warn("[Ink] Converting yellow value to 1."),t=1):t>1&&(t=1),n=+n,isNaN(n)||typeof n!="number")throw Error("[Ink] Black cmyk is not a valid number.");return n<0&&(console.warn(`[Ink] Black cmyk was less than 0. (${n})`),console.warn("[Ink] Converting black value to 0..."),n=0),n>1.0001?(console.warn(`[Ink] Black cmyk was greater than 1. (${n})`),console.warn("[Ink] Converting black value to 1."),n=1):n>1&&(n=1),{r:255*(1-e)*(1-n),g:255*(1-s)*(1-n),b:255*(1-t)*(1-n),a:1}}function O(a){let[e,s,t]=a.replace(/(\(|\)|hsl)/g,"").split(",");return j(`hsla(${e},${s},${t},1)`)}function ne(a){if(a[0]!=="#")throw Error("[Ink] Invalid short hex format.");if(isNaN(parseInt(a.substr(1,3),16)))throw Error("[Ink] Invalid characters in short hex color.");return{r:parseInt(a.substr(1,1)+a.substr(1,1),16),g:parseInt(a.substr(2,1)+a.substr(2,1),16),b:parseInt(a.substr(3,1)+a.substr(3,1),16),a:1}}function ae(a){if(a[0]!=="#")throw Error("[Ink] Invalid long hex format.");if(isNaN(parseInt(a.substr(1,6),16)))throw Error("[Ink Invalid characters in long hex color.");return{r:parseInt(a.substr(1,2),16),g:parseInt(a.substr(3,2),16),b:parseInt(a.substr(5,2),16),a:1}}function re(a){return`rgba(${a.r},${a.g},${a.b},${a.a})`}function le(a){return`rgb(${a.r},${a.g},${a.b})`}function p({r:a,g:e,b:s,a:t}){a/=255,e/=255,s/=255;let n=Math.min(a,e,s),i=Math.max(a,e,s),r=i-n,l,h,o=i;return i!==0?(h=r/i,a===i?l=(e-s)/r:e===i?l=2+(s-4)/r:l=4+(a-e)/r,l*=60,l<0&&(l+=360),isNaN(l)&&(l=0)):(l=0,h=0,o=0),`hsva(${l},${h},${o},${t})`}function he(a){let e=p(a),[s,t,n]=e.replace(/(\(|\)|hsva)/g,"").split(",");return`hsv(${s},${t},${n})`}function oe(a){let e=p(a),[s,t,n,i]=e.replace(/(\(|\)|hsva)/g,"").split(",");return`hsba(${s},${t},${n},${i})`}function ue(a){let e=p(a),[s,t,n]=e.replace(/(\(|\)|hsva)/g,"").split(",");return`hsba(${s},${t},${n})`}function fe({r:a,g:e,b:s,a:t}){a/=255,e/=255,s/=255;let n=1-Math.max(a,e,s),i=(1-a-n)/(1-n),r=(1-e-n)/(1-n),l=(1-s-n)/(1-n);return`cmyk(${i},${r},${l},${n})`}function B({r:a,g:e,b:s,a:t}){a/=255,e/=255,s/=255;let n=Math.max(a,e,s),i=Math.min(a,e,s),r=n-i,l,h,o=(n+i)/2;return r?(h=r/(1-Math.abs(2*o-1)),n===a?l=60*((e-s)/r%6):n===e?l=60*((s-a)/r+2):l=60*((a-e)/r+4),l<0&&(l=360+l)):l=h=0,`hsla(${l},${h},${o},${t})`}function R(a){let e=B(a),[s,t,n]=e.replace(/(\(|\)|hsla)/g,"").split(",");return`hsl(${s},${t},${n})`}function ce(a){let e=a.r.toString(16).padStart(2,"0"),s=a.g.toString(16).padStart(2,"0"),t=a.b.toString(16).padStart(2,"0");return`#${e}${s}${t}`}function G(a,{...e}={}){let{r:s,g:t,b:n,a:i}=Q(a);if(isNaN(i)||typeof i!="number")throw Error("[Ink] Alpha value is not a valid number.");if(i<0&&(console.warn(`[Ink] Alpha was less than 0. (${i})`),console.warn("[Ink] Converting alpha to 0..."),i=0),i>1.0001?(console.warn(`[Ink] Alpha was greater than 1. (${i})`),console.warn("[Ink] Converting alpha to 1..."),i=1):i>1&&(i=1),e.r&&typeof e.r!="number"||e.r&&isNaN(e.r))throw Error("[Ink] Red color weight is not a number.");if(e.r&&e.r<0)throw Error("[Ink] Red color weight must be greater than 0.");if(e.g&&typeof e.g!="number"||e.g&&isNaN(e.g))throw Error("[Ink] Green color weight is not a number.");if(e.g&&e.g<0)throw Error("[Ink] Green color weight must be greater than 0.");if(e.b&&typeof e.b!="number"||e.b&&isNaN(e.b))throw Error("[Ink] Blue color weight is not a number.");if(e.b&&e.b<0)throw Error("[Ink] Blue color weight must be greater than 0.");if(e.l&&typeof e.l!="number"||e.l&&isNaN(e.l))throw Error("[Ink] Lightness weight is not a number.");if(e.s&&typeof e.s!="number"||e.s&&isNaN(e.s))throw Error("[Ink] Saturation weight is not a number.");if(e.r<0||e.g<0||e.b<0||e.r>1||e.g>1||e.b>1)throw Error("[Ink] Color weights must be inclusively between 0 and 1.");if(e.a<0||e.a>1)throw Error("[Ink] Color alpha must be inclusively between 0 and 1.");if(e.minLightness&&typeof e.minLightness!="number")throw Error("[Ink] Min lightness is not a number.");if(e.minLightness&&isNaN(e.minLightness))throw Error("[Ink] Min lightness is not a number.");if(e.maxLightness&&typeof e.maxLightness!="number")throw Error("[Ink] Max lightness is not a number.");if(e.maxLightness&&isNaN(e.maxLightness))throw Error("[Ink] Max lightness is not a number.");if(e.lightness&&typeof e.lightness!="number")throw Error("[Ink] lightness is not a number.");if(e.lightness&&isNaN(e.lightness))throw Error("[Ink] lightness is not a number.");if(e.minSaturation&&typeof e.minSaturation!="number")throw Error("[Ink] Min saturation is not a number.");if(e.minSaturation&&isNaN(e.minSaturation))throw Error("[Ink] Min saturation is not a number.");if(e.maxSaturation&&typeof e.maxSaturation!="number")throw Error("[Ink] Max saturation is not a number.");if(e.maxSaturation&&isNaN(e.maxSaturation))throw Error("[Ink] Max saturation is not a number.");if(e.saturation&&typeof e.saturation!="number")throw Error("[Ink] Saturation is not a number.");if(e.saturation&&isNaN(e.saturation))throw Error("[Ink] Saturation is not a number.");if(e.object&&typeof e.object!="boolean")throw Error("[Ink] Object output parameter value is not a boolean.");if(e.minSaturation>e.maxSaturation&&(console.warn("[Ink] Min saturation must be smaller than max saturation."),console.warn("[Ink] Switching min and max saturations..."),[e.minSaturation,e.maxSaturation]=[e.maxSaturation,e.minSaturation]),e.minLightness>e.maxLightness&&(console.warn("[Ink] Min lightness must be smaller than max lightness."),console.warn("[Ink] Switching min and max lightness..."),[e.minLightness,e.maxLightness]=[e.maxLighntess,e.minLightness]),(e.minLightness&&e.lightness||e.maxLightness&&e.lightness)&&(console.warn("[Ink] Cannot have lightness setting and a threshold."),console.warn("[Ink] Ignoring lightness threshold..."),delete e.minLightness,delete e.maxLightness),(e.minSaturation&&e.saturation||e.maxSaturation&&e.saturation)&&(console.warn("[Ink] Cannot have saturation setting and a threshold."),console.warn("[Ink] Ignoring saturation threshold..."),delete e.minSaturation,delete e.maxSaturation),e.maxLightness&&e.minLightness&&e.maxLightness-e.minLightness<.01&&(console.warn("[Ink] Max and min lightness threshold too close."),console.warn("[Ink] Removing lightness threshold and using hard setting..."),e.lightness=e.minLightness,delete e.minLightness,delete e.maxLightness),e.minSaturation&&e.maxSaturation&&e.maxSaturation-e.minSaturation<.01&&(console.warn("[Ink] Max and min saturation threshold too close."),console.warn("[Ink] Removing saturation threshold and using hard setting..."),e.saturation=e.minSaturation,delete e.minSaturation,delete e.maxSaturation),e.r&&(s=Math.floor(e.r*s),s>255&&(s=255)),e.g&&(t=Math.floor(e.g*t),t>255&&(t=255)),e.b&&(n=Math.floor(e.b*n),n>255&&(n=255)),e.a&&(i=e.a),e.l){let[l,h,o]=R({r:s,g:t,b:n}).replace(/(\(|\)|hsl)/g,"").split(",");o=+o,o+=e.l,{r:s,g:t,b:n}=O(`hsl(${l},${h},${o})`)}if(e.s){let[l,h,o]=R({r:s,g:t,b:n}).replace(/(\(|\)|hsl)/g,"").split(",");h=+h,h+=+e.s,{r:s,g:t,b:n}=O(`hsl(${l},${h},${o})`)}if(e.minLightness||e.maxLightness||e.lightness){let[l,h,o]=R({r:s,g:t,b:n}).replace(/(\(|\)|hsl)/g,"").split(",");e.minLightness&&o<e.minLightness&&(o=e.minLightness),e.maxLightness&&o>e.maxLightness&&(o=e.maxLightness),e.lightness&&+o!==e.lightness&&(o=e.lightness),{r:s,g:t,b:n}=O(`hsl(${l},${h},${o})`)}if(e.minSaturation||e.maxSaturation||e.saturation){let[l,h,o]=R({r:s,g:t,b:n}).replace(/(\(|\)|hsl)/g,"").split(",");e.minSaturation&&h<e.minSaturation&&(h=e.minSaturation),e.maxSaturation&&h>e.maxSaturation&&(h=e.maxSaturation),e.saturation&&+h!==e.saturation&&(h=e.saturation),{r:s,g:t,b:n}=O(`hsl(${l},${h},${o})`)}s=Math.round(s),t=Math.round(t),n=Math.round(n),i=i.toFixed(3);let r;return e.format&&e.format==="object"?r={r:s,g:t,b:n,a:i}:e.format&&e.format==="hex"?r=ce({r:s,g:t,b:n}):e.format&&e.format==="hsl"?r=R({r:s,g:t,b:n}):e.format&&e.format==="hsla"?r=B({r:s,g:t,b:n,a:i}):e.format&&e.format==="hsv"?r=he({r:s,g:t,b:n}):e.format&&e.format==="hsva"?r=p({r:s,g:t,b:n,a:i}):e.format&&e.format==="hsb"?r=ue({r:s,g:t,b:n}):e.format&&e.format==="hsba"?r=oe({r:s,g:t,b:n,a:i}):e.format&&e.format==="rgb"?r=le({r:s,g:t,b:n}):e.format&&e.format==="cmyk"?r=fe({r:s,g:t,b:n}):r=re({r:s,g:t,b:n,a:i}),r}function we(a,e){let s=null;return function(){const t=()=>a.apply(this,arguments);clearTimeout(s),s=setTimeout(t,e)}}class ge{constructor(e="2d",s={}){if(this.context=e,this.options=s,window.CanvasRenderingContext2D)this.activated=!0;else return this.activated=!1,!1;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext(e,s),this.viewport=this.acquireViewport(),window.onresize=we(()=>{this.viewport=this.acquireViewport(),this.resizeCanvas(),this.config(),this.redraw()},300),this.background="#000",this.started=!1,document.body.appendChild(this.canvas);let t=document.createElement("style");t.type="text/css",t.rel="stylesheet",t.innerHTML=`body{background-color:${this.background};margin:0;}
      canvas{position:fixed;left:0;top:0;right:0;bottom:0}`,document.querySelector("head").appendChild(t),this.resizeCanvas()}resizeCanvas(){const e=window.devicePixelRatio||1;this.canvas.style.width=`${this.viewport.w}px`,this.canvas.style.height=`${this.viewport.h}px`,this.canvas.width=this.viewport.w*e,this.canvas.height=this.viewport.h*e,this.ctx.scale(e,e)}acquireContext(){this.ctx=this.canvas.getContext(this.context)}acquireViewport(){let e=window,s="inner";return e.innerWidth||(s="client",e=document.documentElement||document.body),{w:e[s+"Width"],h:e[s+"Height"]}}redraw(){this.started||(this.config(),this.started=!0),this.onDraw()}config(){}onDraw(){this.ctx.fillStyle=this.background,this.ctx.fillRect(0,0,this.viewport.width,this.viewport.height)}}class de{constructor(e,{interval:s,phase:t,colors:n,x:i,y:r,width:l,height:h,makeGradient:o}){if(this.interval=s||100,this.frame=this.interval,this.phase=t,this.easel=e,this.x=i,this.y=r,this.width=l,this.height=h,this.makeGradient=o,this.colors=n,this.colorD=[],this.err=0,!e)throw new Error(`Error ${++this.err}: Easel missing.`);this.err||this.initialize()}initialize(){var e,s,t,n,i;this.colors.forEach((r,l)=>{e={},s={r:0,g:0,b:0},n=0,t=0,Object.keys(r).forEach(h=>{let o=r[h],u={r:o.r-s.r,g:o.g-s.g,b:o.b-s.b};if(n===1?(t=u,i=h):n>1&&(e[h]=u),n++,s={r:o.r,g:o.g,b:o.b},h===this.phase){let f=this.colors[l].current;f.r=s.r,f.g=s.g,f.b=s.b}}),e[i]={r:t.r-s.r,g:t.g-s.g,b:t.b-s.b},this.colorD.push(e)})}getNextPhase(){var e=0,s="",t;for(t in this.colors[0]){if(e){s=t;break}t===this.phase&&(e=1)}if(s.length===0){for(t in this.colors[0])if(t!=="current"){s=t;break}}return this.colors.forEach((n,i)=>{n.current.r=n[this.phase].r,n.current.g=n[this.phase].g,n.current.b=n[this.phase].b}),s}drawNext(e){var s=this.makeGradient();this.colors.forEach((t,n)=>{let i=t.current;s.addColorStop(n,"rgb("+(i.r|0)+","+(i.g|0)+","+(i.b|0)+")")}),this.easel.ctx.fillStyle=s,this.easel.ctx.fillRect(this.x,this.y,this.width,this.height),this.frame===this.interval&&(this.frame=-1,this.phase=this.getNextPhase()),this.colors.forEach((t,n)=>{let i=t.current,r=this.colorD[n][this.phase];i.r+=r.r/this.interval,i.g+=r.g/this.interval,i.b+=r.b/this.interval}),this.frame++}}class me{constructor(e){if(this.active=!0,this.easel=e,this.ctx=e.ctx,this.collection=[],this.quantity=1,this.size=1,this.startX=0,this.startY=0,this.endX=1,this.endY=1,this.windX=0,this.windY=0,this.clear=!0,this.color="#48F",this.clearColor="#000",this.tweenType=0,this.tweenCurrent=0,this.tweenDuration=1e3,this.tweenSpeed=1,this.background=null,!this.ctx)throw new Error("Ion initialized without easel.")}tween(e,s,{o:t,d:n=e.tweenDuration,t:i=e.tweenCurrent,type:r=s==="x"?e.tweenTypeX:e.tweenTypeY,b:l=s==="x"?e.startX:e.startY,c:h=s==="x"?e.endX-e.startX:e.endY-e.startY}={}){let o;if(r==="ease-in-quad")o=h*(i/=n)*i+l;else if(r==="ease-out-quad")o=-h*(i/=n)*(i-2)+l;else if(r==="ease-in-out-quad")o=(i/=n/2)<1?h/2*i*i+l:-h/2*(--i*(i-2)-1)+l;else if(r==="ease-in-cubic")o=h*(i/=n)*i*i+l;else if(r==="ease-out-cubic")o=h*((i=i/n-1)*i*i+1)+l;else if(r==="ease-in-out-cubic")o=(i/=n/2)<1?h/2*i*i*i+l:h/2*((i-=2)*i*i+2)+l;else if(r==="ease-in-quart")o=h*(i/=n)*i*i*i+l;else if(r==="ease-out-quart")o=-h*((i=i/n-1)*i*i*i-1)+l;else if(r==="ease-in-out-quart")o=(i/=n/2)<1?h/2*i*i*i*i+l:-h/2*((i-=2)*i*i*i-2)+l;else if(r==="ease-in-quint")o=h*(i/=n)*i*i*i*i+l;else if(r==="ease-out-quint")o=h*((i=i/n-1)*i*i*i*i+1)+l;else if(r==="ease-in-out-quint")o=(i/=n/2)<1?h/2*i*i*i*i*i+l:h/2*((i-=2)*i*i*i*i+2)+l;else if(r==="ease-in-sine")o=-h*Math.cos(i/n*(Math.PI/2))+h+l;else if(r==="ease-out-sine")o=h*Math.sin(i/n*(Math.PI/2))+l;else if(r==="ease-in-out-sine")o=-h/2*(Math.cos(Math.PI*i/n)-1)+l;else if(r==="ease-in-exponential")o=i===0?l:h*Math.pow(2,10*(i/n-1))+l;else if(r==="ease-out-exponential")o=i===n?l+h:h*(-Math.pow(2,-10*i/n)+1)+l;else if(r==="ease-in-out-exponential")o=i===0?l:i===n?l+h:(i/=n/2)<1?h/2*Math.pow(2,10*(i-1))+l:h/2*(-Math.pow(2,-10*--i)+2)+l;else if(r==="ease-in-circular")o=-h*(Math.sqrt(1-(i/=n)*i)-1)+l;else if(r==="ease-out-circular")o=h*Math.sqrt(1-(i=i/n-1)*i)+l;else if(r==="ease-in-out-circular")o=(i/=n/2)<1?-h/2*(Math.sqrt(1-i*i)-1)+l:h/2*(Math.sqrt(1-(i-=2)*i)+1)+l;else if(r==="ease-in-elastic-weak")o=this.tween(e,s,{o:.5,type:"ease-in-elastic"});else if(r==="ease-in-elastic")o=(()=>{let u=1.70158,f=0,c=h;return i===0?l:(i/=n)===1?l+h:(f||(f=n*(t||.3)),c<Math.abs(h+.1)?(c=h,u=f/4):u=f/(2*Math.PI)*Math.asin(h/c),-(c*Math.pow(2,10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/f))+l)})();else if(r==="ease-in-elastic-strong")o=this.tween(e,s,{o:.1,type:"ease-in-elastic"});else if(r==="ease-out-elastic-weak")o=this.tween(e,s,{o:.5,type:"ease-out-elastic"});else if(r==="ease-out-elastic")o=(()=>{var u=1.70158,f=0,c=h;return i===0?l:(i/=n)===1?l+h:(f||(f=n*(t||.3)),c<Math.abs(h+.1)?(c=h,u=f/4):u=f/(2*Math.PI)*Math.asin(h/c),c*Math.pow(2,-10*i)*Math.sin((i*n-u)*(2*Math.PI)/f)+h+l)})();else if(r==="ease-out-elastic-strong")o=this.tween(e,s,{o:.1,type:"ease-out-elastic"});else if(r==="ease-in-out-elastic-weak")o=this.tween(e,s,{o:.5,type:"ease-in-out-elastic"});else if(r==="ease-in-out-elastic")o=(()=>{var u=1.70158,f=0,c=h;return i===0?l:(i/=n/2)===2?l+h:(f||(f=n*((t||.3)*1.5)),c<Math.abs(h+.1)?(c=h,u=f/4):u=f/(2*Math.PI)*Math.asin(h/c),i<1?-.5*(c*Math.pow(2,10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/f))+l:c*Math.pow(2,-10*(i-=1))*Math.sin((i*n-u)*(2*Math.PI)/f)*.5+h+l)})();else if(r==="ease-in-out-elastic-strong")o=this.tween(e,s,{o:.1,type:"ease-in-out-elastic"});else if(r==="ease-in-back-weak")o=this.tween(e,s,{o:1.30158,type:"ease-in-back"});else if(r==="ease-in-back"){let u=t||1.70158;o=h*(i/=n)*i*((u+1)*i-u)+l}else if(r==="ease-in-back-strong")o=this.tween(e,s,{o:2.40158,type:"ease-in-back"});else if(r==="ease-out-back-weak")o=this.tween(e,s,{o:1.30158,type:"ease-out-back"});else if(r==="ease-out-back"){let u=t||1.70158;o=h*((i=i/n-1)*i*((u+1)*i+u)+1)+l}else if(r==="ease-out-back-strong")o=this.tween(e,s,{o:2.40158,type:"ease-out-back"});else if(r==="ease-in-out-back-weak")o=this.tween(e,s,{o:1.30158,type:"ease-in-out-back"});else if(r==="ease-in-out-back"){let u=t||1.70158;(i/=n/2)<1?o=h/2*(i*i*(((u*=1.525)+1)*i-u))+l:o=h/2*((i-=2)*i*(((u*=1.525)+1)*i+u)+2)+l}else r==="ease-in-out-back-strong"?o=this.tween(e,s,{o:2.40158,type:"ease-in-out-back"}):r==="ease-in-bounce"?o=h-this.tween(e,s,{t:n-i,b:0,c:h,d:n,type:"ease-out-bounce"})+l:r==="ease-out-bounce"?(i/=n)<1/2.75?o=h*(7.5625*i*i)+l:i<2/2.75?o=h*(7.5625*(i-=1.5/2.75)*i+.75)+l:i<2.5/2.75?o=h*(7.5625*(i-=2.25/2.75)*i+.9375)+l:o=h*(7.5625*(i-=2.625/2.75)*i+.984375)+l:r==="ease-in-out-bounce"?i<n/2?o=this.tween(e,s,{t:i*2,b:0,c:h,d:n,type:"ease-in-bounce"})*.5+l:o=this.tween(e,s,{t:i*2-n,b:0,c:h,d:n,type:"ease-out-bounce"})*.5+h*.5+l:o=h*i/n+l;return o}getNew(e){let s=typeof this.startX=="function"?this.startX(e):this.startX,t=typeof this.startY=="function"?this.startY(e):this.startY,n=typeof this.endX=="function"?this.endX(e,s):this.endX,i=typeof this.endY=="function"?this.endY(e,t):this.endY,r=this.tweenCurrent,l=typeof r=="function"?r(e):r,h=this.tweenDuration,o=typeof h=="function"?h(e):h,u=typeof this.tweenType=="function"?this.tweenType(e):this.tweenType,f=typeof this.size=="function"?this.size(e):this.size,c=typeof this.image=="function"?this.image(e):this.image,w={};return this.onCreate(),w.id=e,w.startX=s,w.startY=t,w.x=s,w.y=t,w.endX=n,w.endY=i,w.tweenCurrent=l,w.tweenDuration=o,w.tweenTypeX=typeof this.tweenTypeX=="function"?this.tweenTypeX(e):this.tweenTypeX||u,w.tweenTypeY=typeof this.tweenTypeY=="function"?this.tweenTypeY(e):this.tweenTypeY||u,w.onEnd=this.onParticleEnd,w.size=f,this.windStatic?(w.windX=typeof this.windX=="function"?this.windX(e):this.windX,w.windY=typeof this.windY=="function"?this.windY(e):this.windY):(w.windX=this.windX||0,w.windY=this.windY||0),w.color=this.color,w.image=c,w.imageWidth=this.imageWidth,w.imageHeight=this.imageHeight,w}static reset(e){e.x=e.startX=e.originX,e.y=e.startY=e.originY,e.endX=e.terminalX,e.endY=e.terminalY,e.tweenCurrent=0}reevaluate(e){let s=typeof this.startX=="function"?this.startX(e.id):this.startX,t=typeof this.startY=="function"?this.startY(e.id):this.startY,n=typeof this.endX=="function"?this.endX(e.id,s):this.endX,i=typeof this.endY=="function"?this.endY(e.id,t):this.endY;e.x=e.startX=s,e.y=e.startY=t,e.endX=n,e.endY=i,this.windStatic&&(e.windX=typeof this.windX=="function"?this.windX(e.id):this.windX,e.windY=typeof this.windY=="function"?this.windY(e.id):this.windY),e.tweenCurrent=0}populate(e){e?(this.collection.push(this.getNew(this.collection.length)),this.collection.length<this.quantity&&(typeof e=="function"?setTimeout(()=>this.populate(e),e()):typeof e=="number"?setTimeout(()=>this.populate(e),e):setTimeout(()=>this.populate(),1))):this.collection=new Array(this.quantity).fill(null).map((s,t)=>this.getNew(t))}static wind(e){typeof e.windX=="function"?e.endX+=e.windX(e):e.windX&&(e.endX+=e.windX),typeof e.windY=="function"?e.endY+=e.windY(e):e.windY&&(e.endY+=e.windY),typeof e.windX=="function"?e.startX+=e.windX(e):e.windX&&(e.startX+=e.windX),typeof e.windY=="function"?e.startY+=e.windY(e):e.windY&&(e.startY+=e.windY)}onMove(e){}draw(e,s){let t=e,n=t.image,i=t.size||1;if(s?this.ctx.fillStyle=this.clearColor:typeof e.color=="function"?this.ctx.fillStyle=e.color(e):this.ctx.fillStyle=e.color,n&&n instanceof Array&&n.length){let r=t.imageWidth/n[0].length,l=t.imageHeight/n.length;n.forEach((h,o)=>{h.forEach((u,f)=>{s&&u?this.ctx.fillRect(t.x+f*r-1,t.y+o*l-1,i*r+1,i*l+1):u&&this.ctx.fillRect(t.x+f*r,t.y+o*l,i*r,i*l)})})}else if(n){let r=t.x-t.imageWidth/2,l=t.y-t.imageHeight/2;t.imageWidth&&t.imageHeight?this.ctx.drawImage(n,r,l,t.imageWidth,t.imageHeight):this.ctx.drawImage(n,r,l)}else if(t.circle)this.ctx.beginPath(),this.ctx.arc(t.x,t.y,i,0,2*Math.PI),this.ctx.fill();else if(this.gradient){let r=this.ctx.createRadialGradient(t.x+i/2,t.y+i/2,0,t.x+i/2,t.y+i/2,i/2);if(typeof this.gradient=="function"){let l=this.gradient(t);r.addColorStop(0,l[0]),r.addColorStop(1,l[1])}else r.addColorStop(0,this.gradient[0]),r.addColorStop(1,this.gradient[1]);this.ctx.fillStyle=r,this.ctx.fillRect(t.x,t.y,i,i)}else this.ctx.fillRect(t.x,t.y,i,i)}clear(e){this.draw(e,!0)}onCreate(){}onParticleEnd(){}onEscape(){}process(){!this.active||(this.clearFrame(),this.getFrame(),this.afterDraw(),this.tweenSpeed===1?requestAnimationFrame(()=>this.process()):setTimeout(()=>this.process(),this.tweenSpeed))}afterDraw(){}clearFrame(){this.clear&&this.background?this.ctx.putImageData(this.background,0,0):this.clear&&(this.ctx.fillStyle=this.clearColor,this.ctx.fillRect(0,0,this.easel.viewport.w,this.easel.viewport.h))}getFrame(){this.collection.forEach(e=>{e.imageClear&&this.clear(e),this.constructor.wind(e),this.onMove(e),(e.x<0||e.y<0||e.x>this.easel.viewport.w||e.y>this.easel.viewport.h)&&this.onEscape(e),e.tweenCurrent<e.tweenDuration&&(e.x=this.tween(e,"x"),e.y=this.tween(e,"y")),e.tweenCurrent++,e.tweenCurrent>=e.tweenDuration&&e.onEnd&&e.onEnd.call(this,e),this.draw(e)})}}function be(a){let{startX:e,startY:s,width:t,height:n,color:i,quantity:r,ion:l}=a,h=l||new this.Ion(this.easel);return e=e||0,s=s||0,t=t||20,n=n||100,h.quantity=r,h.states=["initial"],h.clear=!1,h.color=o=>{let u,f=o.tweenDuration/2;o.tweenCurrent<=f?u=o.tweenCurrent/f:u=(f-Math.abs(f-o.tweenCurrent))/f;let{r:c,g:w,b:y}=G(i,{format:"object"});return`rgba(${c},${w},${y},${u})`},h.startX=()=>this.camera.x+e+Math.random()*t,h.startY=()=>this.camera.y+s+Math.random()*n,h.endX=o=>this.camera.x+o+Math.random()*t/4-t/8,h.endY=()=>this.camera.y+s,h.tweenType=()=>[1,4,7,10,13,15][Math.floor(Math.random()*6)],h.tweenDuration=()=>Math.floor(Math.random()*300+300),h.tweenCurrent=()=>Math.floor(Math.random()*h.tweenDuration()),h.onEscape=function(u){this.onParticleEnd(u)},h.onParticleEnd=h.reevaluate,h.size=()=>Math.random()*4,h.onMove=function(u){let f=(n+t)/8;u.tweenCurrent>u.tweenDuration*.15?this.onParticleEnd(u):u.size=f-f/u.tweenDuration*u.tweenCurrent},l?(h.collection.forEach(o=>{h.reevaluate(o),o.tweenCurrent=h.tweenCurrent()}),h.active=!0):h.populate(),h}function ye(a){let{startX:e,startY:s,width:t,height:n,color:i,quantity:r}=a,l=new this.Ion(this.easel);return e=e||0,s=s||0,t=t||20,n=n||100,l.quantity=r,l.states=["initial"],l.clear=!1,l.color=i||"rgba(250,170,0,0.2)",l.startX=()=>this.camera.x+e+Math.random()*t-t/2,l.startY=()=>this.camera.y+s,l.endX=()=>this.camera.x+e,l.endY=()=>this.camera.y+s-n,l.windX=()=>Math.random()*.5-.25,l.windY=()=>Math.random()*2-2,l.tweenType=()=>Math.floor(Math.random()*10+10),l.tweenDuration=()=>Math.floor(Math.random()*300+300),l.onEscape=function(o){this.onParticleEnd(o)},l.onParticleEnd=l.reevaluate,l.onMove=function(o){let u=(n+t)/4;o.tweenCurrent>o.tweenDuration*.15?this.onParticleEnd(o):o.size=u-u/o.tweenDuration*o.tweenCurrent},l.populate(),l}function ke(a){let{startX:e,startY:s,size:t,quantity:n,iterations:i,callback:r}=a,l=new this.Ion(this.easel);return e=e||0,s=s||0,t=t||300,i=i||1/0,l.quantity=n,l.states=["initial"],l.clear=!1,l.color="rgba(200,200,255,0.7)",l.startX=()=>Math.abs(this.camera.x+Math.random()*t-t/2+e)+1,l.startY=()=>Math.abs(this.camera.y+Math.random()*t-t/2+s)+1,l.endX=()=>this.camera.x+e,l.endY=()=>this.camera.y+s,l.size=()=>Math.random()*4+1,l.tweenType="ease-out-circular",l.tweenDuration=()=>Math.floor(Math.random()*100+100),l.onParticleEnd=function(o){i<50&&i>0?(typeof r=="function"&&(r(),r=void 0),i--):i>0?(i--,this.reevaluate(o)):i===0&&(l.finished=!0)},l.onMove=function(o){o.endX=l.endX(),o.endY=l.endY()},l.populate(15),l}function xe(a){let{startX:e,startY:s,endX:t,endY:n,size:i}=a,r=200,l=new this.Ion(this.easel);return e=e||0,s=s||0,t=t||0,n=n||0,i=i||10,l.states=["initial"],l.clear=!1,l.color="rgba(250,250,150,0.5)",l.startX=()=>this.camera.x+t,l.startY=()=>this.camera.y+n,l.endX=()=>this.camera.x+t-i/2+Math.random()*i,l.endY=()=>this.camera.y+n-i/2+Math.random()*i,l.windX=()=>Math.random()*1.5-.75,l.windY=()=>Math.random()*1.5-.75,l.size=()=>Math.floor(Math.random()*2+2),l.tweenType=()=>Math.floor(Math.random()*5+10),l.tweenDuration=()=>Math.floor(Math.random()*50+100),l.onParticleEnd=function(o){this.collection.splice(o.id,1),this.collection.forEach((u,f)=>u.id=f)},l.onCreate=()=>r--,l.populate(),l.draw=()=>{this.easel.ctx.strokeStyle=`rgba(100,100,250,${.1/200*r})`,this.easel.ctx.lineWidth=17,r>0&&(this.easel.ctx.beginPath(),this.easel.ctx.moveTo(this.camera.x+e+3,this.camera.y+s),this.easel.ctx.lineTo(this.camera.x+t+3,this.camera.y+n),this.easel.ctx.stroke(),this.easel.ctx.strokeStyle="#DDF",this.easel.ctx.lineWidth=2,this.easel.ctx.beginPath(),this.easel.ctx.moveTo(this.camera.x+e+3,this.camera.y+s),this.easel.ctx.lineTo(this.camera.x+t+3,this.camera.y+n),this.easel.ctx.stroke())},l}function ve(a){let{startX:e,startY:s,width:t,height:n,color:i,quantity:r,distance:l,duration:h,ion:o}=a,u=o||new this.Ion(this.easel);return e=e||0,s=s||0,t=t||100,n=n||100,u.tweenDuration=h||1e3,u.tweenCurrent=()=>Math.floor(Math.random()*u.tweenDuration),u.quantity=r,u.states=["initial"],u.clear=!1,u.startX=()=>this.camera.x+e+Math.random()*t,u.startY=()=>this.camera.y+s+Math.random()*n,u.endX=(f,c)=>c,u.endY=(f,c)=>c-l,u.size=()=>Math.random()*2,u.color=f=>{let c,w=u.tweenDuration/2;f.tweenCurrent<=w?c=f.tweenCurrent/w:c=(w-Math.abs(w-f.tweenCurrent))/w;let{r:y,g:m,b}=G(i,{format:"object"});return`rgba(${y},${m},${b},${c})`},u.tweenType=6,u.onParticleEnd=u.reevaluate,o?(u.collection.forEach(f=>{u.reevaluate(f),f.tweenCurrent=u.tweenCurrent()}),u.active=!0):u.populate(),u}const Ie=Object.freeze(Object.defineProperty({__proto__:null,smoke:be,flame:ye,vortex:ke,laser:xe,bubbles:ve},Symbol.toStringTag,{value:"Module"}));class Me{constructor(e,s){this.easel=e,this.Ion=s,this.camera={x:0,y:0,dx:0,dy:0},this.collection=[],this.beforeDraw={},this.clouds=Ie,this.state="initial"}animate(e,s){let t=this.collection.find(n=>!n.active);t?this.clouds[e].call(this,{ion:t,...s}):this.collection.push(this.clouds[e].call(this,s))}makeState(e,s){this.beforeDraw[e]=s}clearScene(){this.background?this.easel.ctx.putImageData(this.background,0,0):(this.easel.ctx.fillStyle="#000",this.easel.ctx.fillRect(0,0,this.easel.viewport.w,this.easel.viewport.h))}clean(e){e?this.collection.forEach(s=>{s.states.includes(e)&&(s.active=!1)}):this.collection.forEach(s=>s.active=!1)}draw(){let e=!1;this.clearScene(),this.beforeDraw[this.state]&&this.beforeDraw[this.state](),this.collection.forEach((s,t,n)=>{s.finished&&(e=!0),s.states.includes(this.state)&&(s.finished&&typeof s.onFinished=="function"?s.onFinished(s):s.active&&s.getFrame(s))}),e&&(this.collection=this.collection.filter(s=>!s.finished)),requestAnimationFrame(()=>this.draw())}}const Y=0,L=.12,M=.18,X=.32,x=1,Ee={empty:[Y,Y,Y,x],removed:[X,M,Y,x],doorClosed:[X,M,Y,x],doorOpen:[X,M,Y,x],wall:[L,L,L,x],wallSpecial:[M,M,M,x],water:[M,M,X,x],waterSpecial:[L,L,M,x],floor:[M,X,M,x],floorSpecial:[X,X,M,x],window:[X,L,X,x],default:[x,Y,Y,x]},Ce={get:function(a,e,s){return a.hasOwnProperty(e)?a[e]:a.default}};new Proxy(Ee,Ce);const N=0,T=31,E=46,$=82,v=255,Xe={empty:[N,N,N,v],removed:[$,E,N,v],doorClosed:[$,E,N,v],doorOpen:[$,E,N,v],wall:[T,T,T,v],wallSpecial:[E,E,E,v],water:[E,E,$,v],waterSpecial:[T,T,E,v],floor:[E,$,E,v],floorSpecial:[$,$,E,v],window:[$,T,$,v],default:[v,N,N,v]},$e={get:function(a,e,s){let t;return a.hasOwnProperty(e)?t=a[e]:t=a.default,`rgba(${t[0]},${t[1]},${t[2]},${t[3]})`}};new Proxy(Xe,$e);function V(){const a=(n,i)=>Math.floor(n+Math.random()*(1+i-n));let e,s,t;return[[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e],[e=a(0,1),s=a(0,1),t=a(0,1),a(0,1),t,s,e]]}class Ye{constructor(e){this.easel=e,this.x=this.originX=this.startX=this.easel.viewport.w/2,this.y=this.originY=this.startY=this.easel.viewport.h-50,this.terminalX=this.endX=this.x,this.terminalY=this.endY=this.y,this.tweenCurrent=50,this.tweenDuration=10,this.tweenType="ease-out-circular",this.color="#afa",this.image=V(),this.imageWidth=40,this.imageHeight=40,this.score=0}moveRight(){this.startX=this.originX=this.x,this.terminalX+50+this.imageWidth/2<this.easel.viewport.w?(this.terminalX=this.endX+=50,this.tweenCurrent=0):(this.terminalX=this.easel.viewport.w-this.imageWidth/2,this.tweenCurrent=0)}moveLeft(){this.startX=this.originX=this.x,this.terminalX-50>0?(this.terminalX=this.endX-=50,this.tweenCurrent=0):(this.terminalX=0,this.tweenCurrent=0)}}class A{constructor(e,s,t,n,i=0){const r=s||n.getRandom(),l=r.x+r.imageWidth/2,h=r.y+(s?-2:r.imageHeight);this.easel=e,this.id=i,this.x=this.originX=this.startX=this.terminalX=this.endX=l,this.y=this.originY=this.startY=h,s?this.endY=this.terminalY=this.y-this.easel.viewport.h:this.endY=this.terminalY=this.y+this.easel.viewport.h,this.tweenCurrent=0,this.tweenDuration=200,this.tweenType="linear",this.color="#ffa",this.size=3,this.onEnd=function(u){this.collection.splice(u.id,1),this.collection.forEach((f,c)=>f.id=c)}}}class Ne{constructor(e,s,t){this.easel=e,this.list=[],this.player=s,this.invaders=t}shootFrom(){this.invaders.list.length&&this.list.push(new A(this.easel,this.player,this.list.length))}add(e){this.list.push(e)}startGenerating(){this.invaders.list.length&&this.list.push(new A(this.easel,null,this.list,this.invaders)),setTimeout(()=>{const e=Math.floor(Math.random()*400+100);this.startGenerating(e,!0)},500)}}class Se{constructor({easel:e,id:s,dx:t=0,dy:n=0,color:i,image:r}){this.easel=e,this.id=s,this.x=this.originX=this.startX=1+Math.floor(Math.random()*e.viewport.w),this.y=this.originY=this.startY=15,this.terminalX=this.endX=t,this.terminalY=this.endY=n,this.tweenCurrent=0,this.tweenDuration=100,this.tweenType="ease-out-circular",this.color=i,this.image=r,e.viewport.w>800?(this.imageWidth=40,this.imageHeight=40):(this.imageWidth=20,this.imageHeight=20)}}class Le{constructor(e){this.easel=e,this.types=4,this.colors=["#ee1f30","#fab630","#43af52","#2dbfd4"],this.images=Array.from(new Array(this.types),()=>V()),this.list=[],this.initialize()}initialize(){for(let e=0;e<4;e++)for(let s=0;s<10;s++){const t=Math.floor(s*this.easel.viewport.w/3*2/10+this.easel.viewport.w/6),n=Math.floor(e*this.easel.viewport.h/3*2/10+this.easel.viewport.h/10),i=Math.floor(this.list.length/10);this.list.push(new Se({easel:this.easel,id:this.list.length,type:i,dx:t,dy:n,color:this.colors[i],image:this.images[i]}))}}getRandom(){return this.list[Math.floor(Math.random()*this.list.length)]}}const F=10,Z=5;class Te{constructor(e,s){this.x=e||0,this.y=s||0,this.width=F,this.height=Z}}class De{constructor(e,s){this.bricks=[],this.brickHeight=10,this.x=e,this.y=s;for(let t=0,n,i=s;t<this.brickHeight;t++)n=new Te(this.x,i),i+=Z,this.bricks.push(n)}}class z{constructor(e,s,t){this.stacks=[],this.stackWidth=12,this.width=F*this.stackWidth,this.arcRadius=30,this.x=s*e.viewport.w-this.width/2,this.y=t;for(let n=0,i,r=this.x,l;n<=this.stackWidth;n++)l=this.y-this.arcRadius*Math.sin(Math.PI/this.width*F*n),i=new De(r,l),r+=F,this.stacks.push(i)}}function Re(a){const e=[new z(a,.25,a.viewport.h-130),new z(a,.75,a.viewport.h-130)];return a.viewport.w>500&&e.push(new z(a,1/2,a.viewport.h-130)),e}function Oe(a){const t=[{current:{r:0,g:0,b:0},dawn:{r:119,g:153,b:187},daytime:{r:204,g:238,b:255},dusk:{r:135,g:51,b:85},midnight:{r:0,g:0,b:17}},{current:{r:0,g:0,b:0},dawn:{r:85,g:85,b:120},daytime:{r:50,g:85,b:170},dusk:{r:0,g:17,b:34},midnight:{r:153,g:87,b:22}}];return new de(a,{interval:500,phase:"dawn",colors:t,x:0,y:0,w:a.viewport.w,h:a.viewport.h,makeGradient(){return a.ctx.createLinearGradient(0,0,0,a.viewport.h/5*4)}})}function He(a){const e=new this.Ion(this.easel),{onFinished:s}=a;return e.states=["initial"],e.status=this.invaders.list.length,e.onParticleEnd=()=>{e.status--,e.status||(e.finished=!0)},e.collection=this.invaders.list.map(t=>(t.onEnd=e.onParticleEnd,t)),e.onFinished=s,e}function Pe(){const a=new this.Ion(this.easel),{easel:e,invaders:s}=this,{viewport:t}=e;return s.list.map(n=>{n.x=n.startX=n.originX=n.endX,n.y=n.startY=n.originY=n.endY,n.endX=n.terminalX=n.terminalX-t.w/6|0,n.tweenCurrent=0,n.tweenDuration=100,n.tweenType="ease-in-out-cubic",n.state="left",n.onEnd=function(r){r.x=r.startX=r.originX=r.endX,r.y=r.startY=r.originY=r.endY,r.state==="left"?(r.state="down-left",r.endY=r.terminalY=r.terminalY+r.imageHeight,r.tweenDuration=Math.floor(r.tweenDuration/3),r.tweenType="ease-out-cubic"):r.state==="down-left"?(r.state="right",r.endX=r.terminalX=r.terminalX+t.w/6*2|0,r.tweenDuration=Math.floor(r.tweenDuration*3)-50,r.tweenType="ease-in-out-cubic"):r.state==="right"?(r.state="down-right",r.endY=r.terminalY=r.terminalY+r.imageHeight,r.tweenDuration=Math.floor(r.tweenDuration/3),r.tweenType="ease-out-cubic"):r.state==="down-right"&&(r.state="left",r.endX=r.terminalX=r.terminalX-t.w/6*2|0,r.tweenDuration=Math.floor(r.tweenDuration*3)-50,r.tweenType="ease-in-out-cubic"),r.tweenDuration<50&&(r.tweenDuration=50),r.tweenCurrent=0}}),a.states=["started"],a.collection=s.list,a}function Fe(){const a=new this.Ion(this.easel);return a.states=["started"],a.collection=this.missiles.list,a}function pe(){const a=new this.Ion(this.easel);return a.states=["initial","started"],a.collection=[this.player],a}function ze(){const{dayCycle:a,easel:e,shields:s}=this,{ctx:t,viewport:n}=e;a.drawNext(!0),t.fillStyle="rgb(10,80,10)",t.fillRect(0,n.h-10,n.w,10),t.textAlign="left",t.font="24px Orbitron",t.textBaseline="top",t.fillStyle="#000",t.fillText("STARTING GAME...",15,15),t.fillStyle="#2dbfd4",s.forEach(i=>{i.stacks.forEach(r=>{r.bricks.forEach(l=>t.fillRect(l.x,l.y,l.width,l.height))})})}function qe(){const{dayCycle:a,easel:e,player:s}=this,{ctx:t,viewport:n}=e;a.drawNext(!0),t.fillStyle="rgb(10,80,10)",t.fillRect(0,n.h-10,n.w,10),t.fillStyle="#F99",t.textAlign="center",t.textBaseline="middle",t.font="48px Orbitron",t.fillText("GAME OVER",n.w/2,n.h/2),t.fillStyle="#ff9",t.font="18px Orbitron",n.w<800?t.fillText("[TOUCH SCREEN TO PLAY AGAIN]",n.w/2,n.h/4*3):t.fillText("[CLICK SCREEN TO PLAY AGAIN]",n.w/2,n.h/4*3);const i=t.getImageData(15,15,1,1).data,r=(i[0]+i[1]+i[2])/3/255;t.textAlign="left",t.font="24px Orbitron",t.textBaseline="top",r>.5?t.fillStyle="#000":t.fillStyle="#fff",t.fillText(`SCORE: ${s.score}`,15,15)}function Ae(){const{dayCycle:a,easel:e,player:s,missiles:t,shields:n,invaders:i}=this,{ctx:r,viewport:l}=e;a.drawNext(!0),r.fillStyle="rgb(10,80,10)",r.fillRect(0,l.h-10,l.w,10);const h=r.getImageData(15,15,1,1).data,o=(h[0]+h[1]+h[2])/3/255;r.textAlign="left",r.font="24px Orbitron",r.textBaseline="top",o>.5?r.fillStyle="#000":r.fillStyle="#fff",r.fillText(`SCORE: ${s.score}`,15,15),i.list.forEach(u=>{if(u.y+u.imageHeight>l.h-200){const f=s,c=u.x,w=u.x+u.imageWidth,y=u.y,m=u.y+u.imageHeight;let b=f.x,I=f.x+f.imageWidth,k=f.y,d=f.y+f.imageHeight,C=!1;w>=b&&m>=k&&y<=k&&c<=b?(C=!0,this.state="lost"):w>=I&&m>=k&&y<=k&&c<=I?(C=!0,this.state="lost"):w>=b&&m>=d&&y<=d&&c<=b?(C=!0,this.state="lost"):w>=I&&m>=d&&y<=d&&c<=I&&(C=!0,this.state="lost"),C||n.forEach(K=>{K.stacks.forEach((q,U,J)=>{q.bricks.every((S,H,P)=>(b=S.x,I=S.x+S.width,k=S.y,d=S.y+S.height,(w>=b&&m>=k&&y<=k&&c<=b||w>=I&&m>=k&&y<=k&&c<=I||w>=b&&m>=d&&y<=d&&c<=b||w>=I&&m>=d&&y<=d&&c<=I)&&(C=!0,P.splice(H,1)),q.bricks.length===0&&J.splice(U,1),!0))})})}}),t.list.forEach((u,f,c)=>{if(u.y>l.h-10)c.splice(f,1);else if(u.y>l.h-200){const w=s;if(w.x<=u.x&&w.y<=u.y&&w.x+w.imageWidth>=u.x&&w.y+w.imageHeight>=u.y)return this.state="lost",!0;n.some(y=>y.stacks.some((m,b,I)=>{let k=!1;if(u.y<u.endY){const d=m.bricks[0];d.x<=u.x&&d.y<=u.y&&d.x+d.width>=u.x&&d.y+d.height>=u.y&&(m.bricks.shift(),c.splice(f,1),m.bricks.length===0&&I.splice(b,1),k=!0)}else{const d=m.bricks[m.bricks.length-1];d.x<=u.x&&d.y<=u.y&&d.x+d.width>=u.x&&d.y+d.height>=u.y&&(m.bricks.pop(),c.splice(f,1),m.bricks.length===0&&I.splice(b,1),k=!0)}return k}))}return u.y>u.endY&&i.list.some((w,y,m)=>{let b=!1;return w.x<=u.x&&w.y<=u.y&&w.x+w.imageWidth>=u.x&&w.y+w.imageHeight>=u.y&&(m.splice(y,1),c.splice(f,1),s.score+=100,m.length===0&&(this.state="won"),b=!0),b}),!0}),r.fillStyle="#2dbfd4",n.forEach(u=>{u.stacks.forEach(f=>{f.bricks.forEach(c=>r.fillRect(c.x,c.y,c.width,c.height))})})}function We(){const{dayCycle:a,easel:e,player:s}=this,{ctx:t,viewport:n}=e;a.drawNext(!0),t.fillStyle="rgb(10,80,10)",t.fillRect(0,n.h-10,n.w,10),t.fillStyle="#9F9",t.textAlign="center",t.textBaseline="middle",t.font="48px Orbitron",t.fillText("WINNER!",n.w/2,n.h/2);const i=t.getImageData(15,15,1,1).data,r=(i[0]+i[1]+i[2])/3/255;t.textAlign="left",t.font="24px Orbitron",t.textBaseline="top",r>.5?t.fillStyle="#000":t.fillStyle="#fff",t.fillText(`SCORE: ${s.score}`,15,15)}const D=new ge,g=new Me(D,me);g.player=new Ye(D);g.invaders=new Le(D);g.missiles=new Ne(D,g.player,g.invaders);g.shields=Re(D);g.dayCycle=Oe(D);g.clouds={playerMovement:pe,zoomIntoSpace:He,missileAttacks:Fe,zigZag:Pe};g.animate("playerMovement");g.animate("zoomIntoSpace",{onFinished(){g.state="started",g.animate("zigZag"),g.animate("missileAttacks"),g.missiles.startGenerating()}});g.makeState("initial",()=>ze.call(g));g.makeState("started",()=>Ae.call(g));g.makeState("won",()=>We.call(g));g.makeState("lost",()=>qe.call(g));g.draw();document.addEventListener("keydown",a=>{a.code==="ArrowRight"?g.player.moveRight():a.code==="ArrowLeft"?g.player.moveLeft():a.code==="Space"&&g.missiles.shootFrom(g.player)});document.addEventListener("touchstart",_,!1);document.addEventListener("click",_,!1);window.addEventListener("resize",()=>window.location.reload(),!1);function _(a){if(g.state==="lost")window.location.reload();else{const e=Math.abs(g.player.x-a.clientX);e>50&&a.clientX>g.player.x?g.player.moveRight():e>50&&a.clientX<g.player.x&&g.player.moveLeft(),g.missiles.shootFrom(g.player)}}
